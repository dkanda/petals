## 2024-08-20 â€“ Enforce strict tuple length in `ServerInfo` deserialization
**Issue:** The `ServerInfo.from_tuple` method, responsible for deserializing server metadata from the DHT, validated a minimum of 2 elements in the input tuple but did not enforce a maximum length. The corresponding `to_tuple` serialization method always produces a 3-element tuple. This discrepancy meant the protocol could silently ignore extra data sent by a peer running a newer version of the software.
**Risk:** This silent data loss could lead to subtle, hard-to-debug inconsistencies and emergent bugs in the distributed network. If a future protocol version added a fourth element to the tuple, older peers would silently discard it, leading to a partitioned network state where peers operate on different assumptions. This violates the principle of least surprise and creates a latent protocol versioning vulnerability.
**Resolution:** The `from_tuple` method must enforce a strict contract that mirrors the serialization format. The tuple length is now explicitly validated to be either 2 or 3. Any deviation from this format will now raise an immediate `ValueError`, making protocol mismatches loud and obvious instead of silent and ambiguous. Future protocol changes must now explicitly consider backward compatibility.
